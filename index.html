<html>
    <head>
        <style>
            
            @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap');


            #test {
                border: 2px lightblue dotted;
            }

            #test:hover {
                border: 4px lightblue solid;
            }

            #test:focus {
                border: 0px lightblue solid;
            }

        </style>
        <script>
            function getDomain(url) {
                if ((url.split('/').length - 1) > 2) {
                    return url.split('/')[0] + '/' + url.split('/')[1] + '/' + url.split('/')[2];
                }

                return url;
            }
            var oldValue = undefined
            async function run() {
                var valueThing = document.getElementById('text2').value
                fetch('/proxy', {
                    method: 'POST',
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: 'url=' + valueThing
                })
                    .then(body => body.text())
                    .then(async (body) => {
                        console.log(body)
                        document.open();
                        document.write(body);
                        document.close();
                    })
            }
            async function onload() {
                document.getElementById('test').onclick = run
                document.getElementById('text2').onkeyup = function(e) {
                    if (e.key === 'Enter' || e.keyCode === 13) {
                        run()
                    }
                }
            }
        </script>
    </head>
    <body onload="onload()">
        <div style="position: fixed;
        inset: 0px;
        width: 550px;
        height: 160px;
        max-width: 550px;
        max-height: 160px;
        margin: auto;" id="main">
      <div style='text-align: center; font-size: 40px; font-family: "Quicksand", sans-serif; '>Regents Algebra Help</div>
      <input type="text" id="text2" autocomplete="off" placeholder="Search regents exams" style="transform: translateX(-50%); left: 50%; position: absolute; font-size: 25px; top: 60px; outline: none; border: 4px grey solid; border-radius: 40px; text-align: center; font-family: 'Quicksand', sans-serif; "></input>
      <button id="test" style="transition: 0.1s; cursor: pointer; transform: translateX(-50%); left: 50%; position: absolute; font-size: 25px; top: 110px; background-color: rgba(255,200,200,0.5); outline: none; border-radius: 40px; width: 100px; font-family: 'Quicksand', sans-serif;">Search</button>
        </div>
      <div id="topThing" style="display: none">
        <div style="transform: translateX(-50%); left: 50%; position: absolute; font-size: 25px; top: -56px; background-color: rgba(225,225,225,0.8); height: 125px; width: 320px; border-radius: 20px; text-align: center; font-family: 'Quicksand', sans-serif; "></div>
        <input type="text"  autocomplete="off" placeholder="Search regents exams" style="transform: translateX(-50%); left: 50%; width: 300px; position: absolute; font-size: 25px; top: 20px; outline: none; border: 4px grey solid; border-radius: 40px; text-align: center; font-family: 'Quicksand', sans-serif; "></input>
      </div>
    </body>
</html>